<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Goofy Mania V2</title>
        <link rel="stylesheet" href="./main.css">
        <script src="./main.js"></script>
        <script src="./Game.js"></script>
    </head>
    <body>
        <button id="button" style="width: 100%; height: 100%; font-size: 5em;" onclick="start()">CLICK ME</button>
        <div id="game-container"></div>
        <script>
            (async() => {
                const gameContainer = document.getElementById("game-container");

                const skin = await getSkinData("/skins/default");
                loadDefaultSkin(skin);

                // const mapPath = "/maps/Quaver - Kyu-kurarin (7_7 bootleg)";
                const mapPath = "/maps/Quaver - Metamorphose";
                const levelIndex = 1;

                const map = await getMapData(mapPath);
                const level = await getLevelData(mapPath, map.levels[levelIndex]);

                const userSettings = {
                    scrollSpeed: 17,
                    keybinds: {
                        "4-keys": "dfjk".split("")
                    },
                    ...skin
                }

                game = new Game(gameContainer, map, level, userSettings);
            })();

            function start() {
                game.init();
                game.start();
                document.getElementById("button").remove();
            }
        </script>
    </body>
</html>