<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Goofy Mania V2</title>
        <link rel="stylesheet" href="./main.css">
        <script src="./main.js"></script>
        <script src="./Game.js"></script>
    </head>
    <body>
        <div style="position: absolute; top: 20px; left: 20px; font-family: Arial; color: red;">GOOFY MANIA V2 ALPHA BETA V0.0000000001<br>PART OF MULTIPACK NOT TO BE SOLD SEPERATELY</div>
        <button id="button" style="width: 100%; height: 100%; font-size: 5em;" onclick="start()">CLICK ME</button>
        <div id="game-container"></div>
        <script>
            (async() => {
                const gameContainer = document.getElementById("game-container");

                const skin = await getSkinData("/skins/default");
                loadDefaultSkin(skin);

                // const mapPath = "/maps/Quaver - Bimbo Limbo";
                const mapPath = "/maps/Quaver - Endless Adventure";
                // const mapPath = "/maps/Quaver - Wasted (Bootleg Version) (Cut Ver.)";
                // const mapPath = "/maps/Quaver - this train going nowhere";
                // const mapPath = "/maps/Quaver - Shiawase (VIP)";
                // const mapPath = "/maps/Quaver - Lobotomy";
                // const mapPath = "/maps/Quaver - Everlasting Eternity (uh oh)"; // funny 7k map
                const levelIndex = 2;

                const map = await getMapData(mapPath);
                const level = await getLevelData(mapPath, map.levels[levelIndex]);

                const user = {
                    settings: {
                        scrollSpeed: 20,
                        masterVolume: 25,
                        musicVolume: 100,
                        sfxVolume: 100,
                        keybinds: {
                            "4-keys": "dfjk".split(""),
                            "7-keys": "sdf jkl".split("")
                        }
                    },
                    skin
                }

                game = new Game(gameContainer, map, level, user);
                game.init();
            })();

            function start() {
                if (!game) return start();
                game.start();
                game.onstop = () => location.reload();
                document.getElementById("button").remove();
            }
        </script>
    </body>
</html>